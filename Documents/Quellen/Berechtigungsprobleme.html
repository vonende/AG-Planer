
<!doctype html>
<html lang="en">
<head>
  
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-133560070-15"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'UA-133560070-15');
  </script>
  

  <!-- Required meta tags -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="/static/CACHE/css/dac39baf67b9.css" type="text/css" />

  <title>Berechtigungsprobleme mit / var / www / html und meinem eigenen Ausgangsverzeichnis für ein Website-Dokumentstammverzeichnis</title>
  
  <link rel="canonical" href="https://qastack.com.de/ubuntu/767504/permissions-problems-with-var-www-html-and-my-own-home-directory-for-a-website" />
  <meta name="description" content="[Lösung gefunden!] Sie sollten niemals eine Website in Ihrem Home-Verzeichnis ausführen müssen . JE. Andernfalls müssten Sie dem…"/>


  <link rel="apple-touch-icon" sizes="180x180" href="/static/favicon/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/static/favicon/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/static/favicon/favicon-16x16.png">
  <link rel="manifest" href="/static/favicon/site.webmanifest">

  <script>var useGDPR = true;</script>

  
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
    if(useGDPR) {
        (adsbygoogle = window.adsbygoogle || []).pauseAdRequests = 1;
        
    }
    (adsbygoogle = window.adsbygoogle || []).push({
        google_ad_client: "ca-pub-0985488874840506",
        enable_page_level_ads: true
    });
  </script>
</head>
<body>
<nav class="navbar navbar-expand navbar-light bg-light">
  <div class="container">
    <a class="navbar-brand" href="/"><img src="/static/img/logo.png" height="30" alt="QA Stack"></a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav mr-auto">
        
          <li class="nav-item">
            <a class="nav-link" href="/ubuntu/">Ubuntu</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="/ubuntu/tags/">Tags</a>
          </li>
        
      </ul>
      
      <ul class="navbar-nav">
        <li class="nav-item dropdown">
          
            <a class="nav-link dropdown-toggle" href="#" id="authDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
              Account
            </a>
            <div class="dropdown-menu dropdown-menu-right" aria-labelledby="authDropdown">
              <a class="dropdown-item" href="/accounts/login/?next=/">Anmeldung</a>
              <a class="dropdown-item" href="/accounts/signup/?next=/ubuntu/767504/permissions-problems-with-var-www-html-and-my-own-home-directory-for-a-website">Registrieren</a>
            </div>
          
        </li>
      </ul>
    </div>
  </div>
</nav>
<section class="container mt-4">
  
  
  <div class="row">
    <div class="col-md-9">

      <h1 data-id="5ddfa55c42a61b3e24273111">Berechtigungsprobleme mit / var / www / html und meinem eigenen Ausgangsverzeichnis für ein Website-Dokumentstammverzeichnis</h1>
      <hr>

      <article class="media">
        <div class="text-center pr-3">
          <div class="mb-3">
            <div class="votes-count border rounded" title="stimmen">
              34 <br>
              <span class="icon-thumbs-up"></span>
            </div>
          </div>
          <a data-trans-code="question" class="translate-control btn btn-outline btn-light btn-lg" title="Sprache umschalten"><span class="icon-translate"></span></a>
        </div>
        <div class="media-body">
          <div class="stack-block" data-trans-dest="question">
            <p>Ich versuche, in meinem Ordner <strong>keine</strong> 777-Berechtigung zu erteilen <code>/var/www/html</code>, aber ich möchte meine Dateien ohne bearbeiten <code>sudo</code>. Ich erstelle also einen Symlink zu einem Ordner in meinem Homeverzeichnis <code>/var/www/html</code>. Ich habe es mit erstellt <code>sudo ln -sT /home/andre/www/moodle/ moodle</code>und die <code>ls -la</code>Ausgabe ist wie folgt:</p>

<pre><code>andre@andre-270E5G:/var/www/html$ ls -la
total 8
drwxr-xr-x 2 root root 4096 Mai  4 10:20 .
drwxr-xr-x 4 root root 4096 Abr 29 14:29 ..
lrwxrwxrwx 1 root root   23 Mai  4 10:20 moodle -&gt; /home/andre/www/moodle/
</code></pre>

<p>Mein Moodle-Ordner hat also Lese-, Schreib- und Ausführungsberechtigungen für alle, und das ist nicht das, was ich will. Ich habe <code>sudo chmod -R 775 moodle/</code>versucht, den Befehl zu ändern, aber er blieb bei den Lese-, Schreib- und Ausführungsberechtigungen für alle. Ich habe dasselbe mit dem Moodle-Ordner versucht <code>/home/andre/www/moodle</code>, aber er ist gleich geblieben. Die Ausgabe von <code>ls -la</code>in <code>/home/andre/www/</code>ist:</p>

<pre><code>andre@andre-270E5G:~/www$ ls -la
total 28
drwxrwxr-x  3 andre andre  4096 Mai  4 10:02 .
drwx------ 49 andre andre 20480 Mai  4 10:01 ..
drwxrwxr-x 41 andre andre  4096 Mai  4 10:02 moodle
</code></pre>

<p>Der Ordner <code>moodle</code>in <code>/home/andre/www/</code>hat also die Berechtigungen, die ich möchte.</p>

<p>Als zusätzliches Problem <code>localhost/moodle</code>erhalte ich beim Zugriff den Fehler 403 Verboten.</p>

<p>Was mache ich hier falsch?</p>
          </div>
          <div class="row">
            <div class="col-md-6">
              
                <span class="tags">
                  
                    <a href="/ubuntu/tagged/permissions/" class="badge badge-warning">permissions</a>&nbsp;
                  
                    <a href="/ubuntu/tagged/apache2/" class="badge badge-warning">apache2</a>&nbsp;
                  
                    <a href="/ubuntu/tagged/webserver/" class="badge badge-warning">webserver</a>&nbsp;
                  
                    <a href="/ubuntu/tagged/moodle/" class="badge badge-warning">moodle</a>&nbsp;
                  
                </span>
              
            </div>
            <div class="col-md-6 text-right">
              
                <small class="text-muted font-weight-lighter">
                  &mdash;
                  <a href="https://askubuntu.com/users/526312/andr%c3%a9-carvalho" rel="nofollow noopener noreferrer" target="_blank">
                    André Carvalho
                  </a>
                   <br>
                  <a href="https://askubuntu.com/questions/767504/permissions-problems-with-var-www-html-and-my-own-home-directory-for-a-website"  rel="nofollow noopener noreferrer" target="_blank">
                    <span class="icon-new-window"></span> quelle
                  </a>
                </small>
              
            </div>
          </div>

          <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-0985488874840506"
     data-ad-slot="6265911322"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

          
        </div>
      </article>

      
        <p class="h3 mt-4">Antworten:</p>
        
          <hr>
          <article class="media">
            <div class="text-center pr-3">
              <div class="mb-3">
                <div class="votes-count border rounded" title="stimmen">
                  63 <br>
                  <span class="icon-thumbs-up"></span>
                </div>
              </div>
              <a data-trans-code="answer-767534" class="translate-control btn btn-outline btn-light btn-lg" title="Sprache umschalten"><span class="icon-translate"></span></a>
            </div>
            <div class="media-body">
              <div data-trans-dest="answer-767534" class="stack-block">
                <p><strong><em>Sie sollten niemals eine Website in Ihrem Home-Verzeichnis ausführen müssen</em></strong> .  <strong><em>JE. </em></strong>  Andernfalls müssten Sie dem Webserver die Möglichkeit geben, durch<code>/home/</code>die Verzeichnisstruktur zu navigieren, aber auch in<code>/home/$USER/</code>(das Basisverzeichnis Ihres Benutzers, in dem wir nachsehen können, was in Ihrem Benutzerverzeichnis noch vorhanden ist) sowie in andere Unterordner da drin. Ein schlecht konfigurierter oder falsch konfigurierter oder nicht gepatchter Webserver kann auf diese Weise zu massiven Datenverlusten oder zum Verlust von Anmeldeinformationen führen, wodurch Ihre persönlichen Daten und Anmeldungen für verschiedene Dinge gefährdet werden. Der von Ihnen verwendete Symlink-Ansatz hilft auch nicht aus demselben Grund wie der Versuch, Apache Leseberechtigungen zu erteilen<code>/home/andre/www/moodle</code>- Der Webserver muss in der Lage sein, Ihr Home-Verzeichnis zu durchlaufen, um zu dem Speicherort zu gelangen, auf den der Symlink <code>/var/www/html</code>verweist, der immer noch das Sicherheitsrisiko darstellt.</p>

<p>Erstens verwenden <code>sudo cp -r /home/andre/www/moodle/ /var/www/html/</code>. Dadurch werden Ihre Dateien in <code>/var/www/html</code>Ihr eigenes Ausgangsverzeichnis kopiert und von diesem ferngehalten. Wir werden dann die Berechtigungen wiederholen, damit Sie und der Webserver auf alles in diesem Verzeichnis zugreifen können und Ihrem Benutzer das vollständige Lesen / Schreiben aller Dateien und Verzeichnisse ermöglichen. Dann müssen Sie immer nur <code>/var/www/html</code>für Ihre Website arbeiten.</p>

<p>Dies geschieht in vier Schritten, nachdem Sie Ihre Daten zurückkopiert haben <code>/var/www/html</code>:</p>

<ol>
<li>Geben Sie Apache Zugriff auf die Ordner und Dateien, damit die Site ohne 403 Fehler bereitgestellt werden kann.</li>
<li>Geben Sie Ihrem Benutzer "Eigentümer" über die Dateien und Ordner, und geben Sie sich das Lesen / Schreiben aller Dateien und Ordner sowie die Möglichkeit, die Verzeichnisse zu durchlaufen.</li>
<li><em>(Optional, aber empfohlen)</em> Richten Sie es so ein, dass für alle darauf erstellten Dateien oder Ordner in der gesamten Verzeichnisstruktur die Gruppe festgelegt ist <code>www-data</code>.</li>
<li><em>(Optional)</em> Endgültige Sicherheitsbereinigung, bei der wir Berechtigungen einrichten, damit Sie und der Webserver die Site-Daten sehen können, andere Benutzer jedoch nicht auf Dateien oder die Verzeichnisstruktur der Site zugreifen können.</li>
</ol>

<hr>

<h3>(1) Ermöglichen Sie Apache den Zugriff auf die Ordner und Dateien.</h3>

<pre><code>sudo chgrp -R www-data /var/www/html
sudo find /var/www/html -type d -exec chmod g+rx {} +
sudo find /var/www/html -type f -exec chmod g+r {} +
</code></pre>

<p>Dies setzt rekursiv die 'Gruppe' <code>www-data</code>für die Ordner und Dateien. Dadurch erhält der Webserver die Berechtigung, die Stammverzeichnisstruktur des Site-Dokuments erneut aufzurufen und darauf zuzugreifen (nur <code>+x</code>für Verzeichnisse). Außerdem wird sichergestellt, dass der Webserver über Leseberechtigungen für alle Dateien verfügt, sodass Standortdaten empfangen werden können.</p>

<p>Möglicherweise gibt es einige Fälle, in denen Sie den Web - Server Schreibzugriff auf eine Datei geben, oder in ein Verzeichnis - dies kann , indem Sie erreicht wird <code>sudo chmod g+w /var/www/html/PATH</code>(wo <code>PATH</code>ist der Pfad zur Datei oder einen Ordner in der Verzeichnisstruktur in dem Sie die Anwendung müssen Schreibrechte für den Webserver).</p>

<p><strong>HINWEIS</strong> : In vielen Fällen können hierdurch "sichere" Informationen zu einer Site-Konfiguration angezeigt werden (z. B. Anmeldeinformationen für den Datenbankzugriff usw.), und Sie sollten "andere" Zugriffsberechtigungen für diese Daten in diesen einzelnen Dateien oder Verzeichnissen mit entfernen Folgendes: <code>sudo chmod o-rwx /var/www/html/FILEPATH</code>(Ersetzen <code>FILEPATH</code>durch den Pfad relativ zum <code>/var/www/html</code>Ordner für die Datei).</p>

<p><strong>Beachten Sie auch, dass Sie diese Befehle möglicherweise in Zukunft erneut ausführen müssen, wenn bei 'neuen Dateien' 403 Probleme auftreten, damit der Webserver weiterhin über die richtigen Berechtigungen für den Zugriff auf Dateien und Ordner verfügt, die in und erstellt oder kopiert wurden Die <code>www-data</code>Gruppe wird nicht richtig festgelegt.</strong></p>

<hr>

<h3>(2) Gewähren Sie Ihrem Eigentümer Lese- / Schreibrechte für die Ordner und Dateien und erlauben Sie dem Ordnerzugriff, die Verzeichnisstruktur zu durchlaufen.</h3>

<pre><code>sudo chown -R USER /var/www/html/
sudo find /var/www/html -type d -exec chmod u+rwx {} +
sudo find /var/www/html -type f -exec chmod u+rw {} +
</code></pre>

<p><em>Ersetzen Sie <code>USER</code>im ersten Befehl mit Ihrem eigenen Benutzernamen!</em></p>

<p>Wir machen hier drei Dinge. Zuerst legen wir Ihren Benutzer als "Eigentümer" aller Dateien und Verzeichnisse in fest <code>/var/www/html</code>. Als Nächstes legen wir Lese- und Schreibberechtigungen für die Ordner fest und ermöglichen Ihnen den Zugriff auf die Ordner, um in diese zu gelangen (das <code>+x</code>Element in den Verzeichniselementen). Wir setzen dann alle Dateien auf Lese- / Schreibrechte für den Eigentümer, die wir gerade eingestellt haben.</p>

<hr>

<h3>(3) <em>(Optional)</em> Stellen Sie sicher, dass jede neue Datei danach mit <code>www-data</code>dem Benutzer 'access' erstellt wird.</h3>

<pre><code>sudo find /var/www/html -type d -exec chmod g+s {} +
</code></pre>

<p>Dies setzt das "set gid" -Bit für die Gruppe in den Verzeichnissen. Dateien und Ordner, die in diesen Verzeichnissen erstellt wurden, gelten immer <code>www-data</code>als Gruppe und ermöglichen den Zugriff auf den Webserver.</p>

<hr>

<h3>(4) <em>(Optional)</em> Endgültige Sicherheitsbereinigung, wenn Sie nicht möchten, dass andere Benutzer die Daten sehen können</h3>

<p>Wir brauchen Ihren Benutzer, um die Verzeichnisse und Dateien zu sehen. Wir brauchen dazu auch den Webserver. Möglicherweise möchten wir nicht, dass andere Systembenutzer (außer root) die Daten sehen. Lassen Sie sie also nicht diesen Zugriff gewähren, und legen Sie fest, dass nur Ihr Benutzer und der Webserver die Daten sehen können.</p>

<pre><code>sudo chmod -R o-rwx /var/www/html/
</code></pre>

<p><em>HINWEIS:</em> Sie müssen dies zu einem späteren Zeitpunkt nicht erneut ausführen oder die Berechtigungen für die Kategorie "Andere" hier bearbeiten. Wenn die 'anderen' Benutzer nicht ankommen können <code>/var/www/html/</code>(sie haben nicht das erforderliche <code>+x</code>Bit <code>/var/www/html</code>, um die Dateistruktur und Verzeichnisstruktur zu durchlaufen, noch das <code>+r</code>Bit, um die Dateilisten zu lesen), dann die Berechtigungen für Elemente unter diesem Verzeichnis für andere Benutzer oder Gruppen wird nicht wirklich zu viel ausmachen.</p>

<hr>

<p><strong>Es gibt auch eine etwas weniger invasive Lösung, obwohl nicht garantiert ist, dass sie für alle neuen Dateien funktioniert, und auch nicht für alle Dateisysteme</strong> , die Dateizugriffskontrolllisten enthalten. Auf diese Weise können Sie das Eigentum an den Dateien <code>www-data</code>für bestimmte Zwecke behalten, erhalten jedoch in jeder Hinsicht effektive Eigentumsrechte, auch wenn Sie die Dateien nicht persönlich besitzen.</p>

<p>Diese Lösung ist etwas weniger invasiv und ermöglicht es Ihnen, ein Verzeichnis und alle darin enthaltenen Dateien zu besitzen <code>www-data:www-data</code>oder sich <code>root:www-data</code>selbst Zugriff zu gewähren. Es verwendet <em>Zugriffssteuerungslisten</em> , mit denen Sie mehrere Benutzer über Berechtigungen verfügen können, ohne einzelne Gruppen einzurichten. Auf diese Weise können Benutzer <code>root</code>oder <code>www-data</code>Systembenutzer auch Dateien besitzen, aber Sie können auch von Fall zu Fall zusätzliche Berechtigungen hinzufügen und die Berechtigungen für bestimmte Benutzer so anpassen, dass sie Dinge lesen, aber nicht bearbeiten können.</p>

<p>Angenommen, wir arbeiten noch mit <code>/var/www/html/</code>anderen Benutzern zusammen und möchten nicht, dass andere Benutzer als wir und das System (und natürlich root) unsere Daten sehen, müssen wir die folgenden Dinge tun:</p>

<ol>
<li>Geben Sie dem Webserver-Systembenutzer den Besitz zurück <code>www-data</code>.</li>
</ol>

<pre>sudo chown -R www-daten: www-daten / var / www / html</pre>

<ol start="2">
<li>Geben Sie Ihnen rekursiv Lese- / Schreibzugriff auf die Dateien, während Sie anderen Benutzern (außer <code>www-data</code>und <code>root</code>natürlich) keinen Zugriff auf die Dateien gewähren.</li>
</ol>

<pre>sudo find / var / www / html -type f -exec setfacl -mu: IHR BENUTZERNAME: rw -m other :: --- {} \;</pre>

<ol start="3">
<li>Geben Sie sich rekursiv das Lesen / Schreiben / Durchlaufen der Verzeichnisse, entfernen Sie den Zugriff auf die Ordner für andere Benutzer (ohne <code>www-data</code>und <code>root</code>) und legen Sie dies als 'Standard'-ACL für neue Dateien in den Verzeichnissen fest.</li>
</ol>

<pre>sudo find / var / www / html -type d -exec setfacl -d -mu: IHR BENUTZERNAME: rwx -mo :: --- {} \;</pre>

<ol start="4">
<li>Wir müssen auch das <code>setgid</code>Bit für alle Verzeichnisse setzen, damit der Webserver beim Erstellen einer Datei weiterhin <code>www-data</code>über Gruppenberechtigungen darauf zugreifen kann .</li>
</ol>

<pre>sudo find / var / www / html -type d -exec chmod g + x {} \;</pre>

<p>Und jetzt haben Sie Zugriff auf alle Verzeichnisse, <em>und</em> Sie mussten den Zugriff nicht wegnehmen <code>www-data</code>, um Hilfe zu erhalten, da der Webserver weiterhin überall Dateien erstellen kann, wie es erforderlich ist (z. B. PHP-basierte Frontends mit eigenen Cache-Verzeichnissen und dergleichen) müssen für den ordnungsgemäßen Betrieb erstellt und beschrieben werden).</p>

<p>Die einzige Einschränkung: Wenn Sie manuell neue Dateien erstellen, müssen Sie diese entsprechend anzeigen, um dem Webserver den Besitz zu übertragen. Das ist ganz einfach <code>sudo chown www-data:www-data filename</code>, und in den Zugriffssteuerungslisten sollten Sie weiterhin über effektive Eigentümerrechte für die Datei verfügen.</p>

<p>Es gibt mehrere Fälle, in denen ich dies als Sysadmin für einen nicht standardmäßigen Zugriff tun musste, ohne die Besitzer einer bestimmten Datei zu ändern. Dies funktioniert, hat jedoch seine eigenen Kopfschmerzen, da nicht jedes Dateisystem Dateizugriffslisten <em>unterstützt</em> .</p>
              </div>
              <div class="row">
                <div class="col-md-6">
                  
                </div>
                <div class="col-md-6 text-right">
                  
                    <small class="text-muted font-weight-lighter">
                      &mdash;
                      <a href="https://askubuntu.com/users/10616/thomas-ward" rel="nofollow noopener noreferrer" target="_blank">Thomas Ward </a>
                      <br>
                      <a href="https://askubuntu.com/questions/767504/permissions-problems-with-var-www-html-and-my-own-home-directory-for-a-website/767534#767534" rel="nofollow noopener noreferrer" target="_blank">
                        <span class="icon-new-window"></span> quelle
                      </a>
                    </small>
                  
                </div>
              </div>
              
                <hr>
                <div class="is-comment media">
                  <div  class="text-center pr-2">
                    
                    2<br>
                    
                    <a data-trans-code="comment-1146751" class="translate-control btn btn-outline btn-light btn-lg" title="Sprache umschalten">
                      <span class="icon-translate"></span>
                    </a>
                  </div>
                  <div class="media-body">
                    <div data-trans-dest="comment-1146751">
                      @ AndréCarvalho <code>+x</code>für Dateien würde ausführbare Berechtigungen geben, und wir möchten nicht, dass PHP-Dateien notwendigerweise über die PHP-Befehlszeile oder als ausführbare Datei auf dem Server selbst ausgeführt werden - wir möchten, dass sie vom PHP-Parser auf dem Webserver verarbeitet werden (und wir brauchen keine PHP-Dateien, damit <code>+x</code>der PHP-Parser sie lesen und verarbeiten kann). Verzeichnisse müssen vorhanden <code>+x</code>sein, um das Durchsuchen der Verzeichnisse zu ermöglichen. Wenn also ein Verzeichnis nicht vorhanden ist <code>+x</code>und ich kein Root-Benutzer bin, kann ich nicht in das Verzeichnis gelangen. Dies ist das Problem, das Sie hatten , wenn Apache nicht mit Ihren Symlinks und Ihrem Heimnetzwerk zusammenarbeitet Verzeichnis.
                    </div>
                    
                      <small class="text-muted font-weight-lighter">
                        &mdash;
                        <a href="https://askubuntu.com/users/10616/thomas-ward" rel="nofollow noopener noreferrer" target="_blank">Thomas Ward </a>
                        
                      </small>
                    
                  </div>
                </div>
              
                <hr>
                <div class="is-comment media">
                  <div  class="text-center pr-2">
                    
                    1<br>
                    
                    <a data-trans-code="comment-1146776" class="translate-control btn btn-outline btn-light btn-lg" title="Sprache umschalten">
                      <span class="icon-translate"></span>
                    </a>
                  </div>
                  <div class="media-body">
                    <div data-trans-dest="comment-1146776">
                      @ AndréCarvalho <code>www-data</code>ist eine Systemgruppe - es ist keine Gruppe für Standardbenutzer.
                    </div>
                    
                      <small class="text-muted font-weight-lighter">
                        &mdash;
                        <a href="https://askubuntu.com/users/10616/thomas-ward" rel="nofollow noopener noreferrer" target="_blank">Thomas Ward </a>
                        
                      </small>
                    
                  </div>
                </div>
              
                <hr>
                <div class="is-comment media">
                  <div  class="text-center pr-2">
                    
                    1<br>
                    
                    <a data-trans-code="comment-1623038" class="translate-control btn btn-outline btn-light btn-lg" title="Sprache umschalten">
                      <span class="icon-translate"></span>
                    </a>
                  </div>
                  <div class="media-body">
                    <div data-trans-dest="comment-1623038">
                      @JunaidQadirShekhanzai Unmöglich bereitzustellen, da sich die Einstellungen der Menschen stark von den von ihnen benötigten Umgebungen und vielen anderen Faktoren unterscheiden. Eine solche 'Shell-Datei' wäre unmöglich zu produzieren, da es <i>optionale</i> Komponenten gibt. Ich könnte <i>versuchen</i> , ein Python-Skript
                    </div>
                    
                      <small class="text-muted font-weight-lighter">
                        &mdash;
                        <a href="https://askubuntu.com/users/10616/thomas-ward" rel="nofollow noopener noreferrer" target="_blank">Thomas Ward </a>
                        
                      </small>
                    
                  </div>
                </div>
              
                <hr>
                <div class="is-comment media">
                  <div  class="text-center pr-2">
                    
                    1<br>
                    
                    <a data-trans-code="comment-1827631" class="translate-control btn btn-outline btn-light btn-lg" title="Sprache umschalten">
                      <span class="icon-translate"></span>
                    </a>
                  </div>
                  <div class="media-body">
                    <div data-trans-dest="comment-1827631">
                      @ T.Todua das habe ich nicht gesagt. Ich habe gesagt, dass <b>Sie niemals eine Site außerhalb </b><b>Ihres "Home" -Verzeichnisses</b> (gelesen: von dort aus) ausführen sollten - das heißt, Sie sollten nichts <code>/home/USER/...</code>auf einem Webserver ausführen . Sie haben die Bedeutung der von mir verwendeten Wörter falsch verstanden und missverstanden.  <code>/var/www/*</code>ist ein relativ "sicherer" Ort, an dem Websites ausgeführt werden können, da dies ein dedizierter Ordner / Speicherplatz ist. Dies <code>/var/www/html</code>ist jedoch NICHT sicher, da dies von Webservern bei der Installation und dergleichen geschrieben wurde und zu einer Überlastung wichtiger Daten führt (verwenden <code>/var/www/SUBDIRECTORY</code>Sie diese stattdessen mit einzelnen Site-Unterverzeichnissen)
                    </div>
                    
                      <small class="text-muted font-weight-lighter">
                        &mdash;
                        <a href="https://askubuntu.com/users/10616/thomas-ward" rel="nofollow noopener noreferrer" target="_blank">Thomas Ward </a>
                        
                      </small>
                    
                  </div>
                </div>
              
                <hr>
                <div class="is-comment media">
                  <div  class="text-center pr-2">
                    
                    1<br>
                    
                    <a data-trans-code="comment-1827638" class="translate-control btn btn-outline btn-light btn-lg" title="Sprache umschalten">
                      <span class="icon-translate"></span>
                    </a>
                  </div>
                  <div class="media-body">
                    <div data-trans-dest="comment-1827638">
                      Ich habe den Wortlaut der Klarheit halber angepasst.
                    </div>
                    
                      <small class="text-muted font-weight-lighter">
                        &mdash;
                        <a href="https://askubuntu.com/users/10616/thomas-ward" rel="nofollow noopener noreferrer" target="_blank">Thomas Ward </a>
                        
                      </small>
                    
                  </div>
                </div>
              
            </div>
          </article>
        
          <hr>
          <article class="media">
            <div class="text-center pr-3">
              <div class="mb-3">
                <div class="votes-count border rounded" title="stimmen">
                  2 <br>
                  <span class="icon-thumbs-up"></span>
                </div>
              </div>
              <a data-trans-code="answer-767530" class="translate-control btn btn-outline btn-light btn-lg" title="Sprache umschalten"><span class="icon-translate"></span></a>
            </div>
            <div class="media-body">
              <div data-trans-dest="answer-767530" class="stack-block">
                <p>Die gesamte Idee, Symlinks zur Behebung eines Berechtigungsproblems zu verwenden, ist fehlerhaft und funktioniert nicht. Die Berechtigungen, die für den Symlink selbst angezeigt werden, sind größtenteils irrelevant. Sie können nicht verwendet werden, um die Berechtigungen des "echten" Verzeichnisses zu umgehen. Das Erstellen eines Symlinks von <code>/var/www/html/moodle</code>bis <code>/home/andre/www/moodle/</code>umgeht nicht die Berechtigungen für <code>/home/andre/www/moodle/</code>. Jeder, der etwas tun möchte, <code>/var/www/html/moodle</code>kann dies nur tun, wenn er über die erforderlichen Berechtigungen für verfügt <code>/home/andre/www/moodle/</code>.</p>

<p>Ihre Ausführung <code>sudo chmod -R 775 moodle/</code>tatsächlich <em>tat</em> eine Wirkung haben, aber anders , als Sie dachten , es nicht die Erlaubnis der Symlink nicht geändert haben, aber das Symlink Ziels <code>/home/andre/www/moodle/</code>.</p>

<p>Der 403-Fehler, den Sie auf dem Webserver erhalten, liegt wahrscheinlich daran, dass Ihr Webserver nicht über die erforderlichen Eingabeberechtigungen verfügt <code>/home/andre</code>. Dies ist kein "zusätzliches Problem", sondern aufgrund des gleichen Berechtigungsproblems.</p>

<p>Anstatt Symlinks zu verwenden, müssen Sie Berechtigungen festlegen, mit denen Sie die Dateien bearbeiten und der Webserver auf sie zugreifen kann (oder sie sogar bearbeiten kann, was von der Anwendung abhängt). Was genau diese Berechtigungen sind, hängt von Ihrem genauen Anwendungsfall (Ihrer Anwendungs- und Serverkonfiguration) ab.</p>

<p>Generell halte ich es für eine gute Idee, dass Sie die Dateien besitzen und über RW-Berechtigungen verfügen, der Webserver nur über die Gruppenberechtigungen Lesezugriff auf die Dateien hat und alle anderen Benutzer überhaupt keinen Zugriff haben.</p>

<p>Ein Berechtigungsbeispiel (das aufgrund fehlender Informationen möglicherweise nicht für Ihren Anwendungsfall geeignet ist):</p>

<pre><code>andre@fermat:/var/www/html$ ls -al moodle/
total 0
drwxr-x--- 2 andre www-data 60 mai  4 16:20 .
drwxr-xr-x 3 root  root     80 mai  4 16:20 ..
-rw-r----- 1 andre www-data  0 mai  4 16:20 index.html
</code></pre>

<p>Sie können sehen, dass das Verzeichnis über genügend Zugriff für Sie als Eigentümer verfügt, um es einzugeben und seinen Inhalt zu ändern. Der Webserver (in der Gruppe <code>www-data</code>) kann dies eingeben und lesen. Die Dateien selbst sind für Sie (den Eigentümer) lesbar und beschreibbar und für den Webserver (in der Gruppe <code>www-data</code>) lesbar . Alle anderen Benutzer haben überhaupt keinen Zugriff.</p>

<p>Bitte nehmen Sie dies nur als Beispiel. Der genaue Benutzer / die genaue Gruppe Ihres Webservers hängt von Ihrer Konfiguration ab. Und für Ihre Anwendung (Moodle) sind möglicherweise andere Berechtigungen erforderlich. Weitere Informationen finden Sie in der Dokumentation.</p>
              </div>
              <div class="row">
                <div class="col-md-6">
                  
                </div>
                <div class="col-md-6 text-right">
                  
                    <small class="text-muted font-weight-lighter">
                      &mdash;
                      <a href="https://askubuntu.com/users/537260/mastov" rel="nofollow noopener noreferrer" target="_blank">mastov</a>
                      <br>
                      <a href="https://askubuntu.com/questions/767504/permissions-problems-with-var-www-html-and-my-own-home-directory-for-a-website/767530#767530" rel="nofollow noopener noreferrer" target="_blank">
                        <span class="icon-new-window"></span> quelle
                      </a>
                    </small>
                  
                </div>
              </div>
              
                <hr>
                <div class="is-comment media">
                  <div  class="text-center pr-2">
                    
                    <a data-trans-code="comment-1146376" class="translate-control btn btn-outline btn-light btn-lg" title="Sprache umschalten">
                      <span class="icon-translate"></span>
                    </a>
                  </div>
                  <div class="media-body">
                    <div data-trans-dest="comment-1146376">
                      Einverstanden, aber das ist nicht hilfreich, wenn sie nicht wissen, wie sie die Berechtigungen richtig festlegen sollen, und sie werden auch auf andere Probleme stoßen.
                    </div>
                    
                      <small class="text-muted font-weight-lighter">
                        &mdash;
                        <a href="https://askubuntu.com/users/10616/thomas-ward" rel="nofollow noopener noreferrer" target="_blank">Thomas Ward </a>
                        
                      </small>
                    
                  </div>
                </div>
              
                <hr>
                <div class="is-comment media">
                  <div  class="text-center pr-2">
                    
                    <a data-trans-code="comment-1146379" class="translate-control btn btn-outline btn-light btn-lg" title="Sprache umschalten">
                      <span class="icon-translate"></span>
                    </a>
                  </div>
                  <div class="media-body">
                    <div data-trans-dest="comment-1146379">
                      @ThomasW .: Dann sollte die Frage, wie die Berechtigungen richtig eingestellt werden, eine neue Frage sein, einschließlich der erforderlichen Informationen, wie der Webserverkonfiguration, der gewünschten Art der Bearbeitung der Dateien und den Anforderungen der Anwendung.
                    </div>
                    
                      <small class="text-muted font-weight-lighter">
                        &mdash;
                        <a href="https://askubuntu.com/users/537260/mastov" rel="nofollow noopener noreferrer" target="_blank">Mastov </a>
                        
                      </small>
                    
                  </div>
                </div>
              
                <hr>
                <div class="is-comment media">
                  <div  class="text-center pr-2">
                    
                    <a data-trans-code="comment-1146380" class="translate-control btn btn-outline btn-light btn-lg" title="Sprache umschalten">
                      <span class="icon-translate"></span>
                    </a>
                  </div>
                  <div class="media-body">
                    <div data-trans-dest="comment-1146380">
                      oder als richtige Antwort geschrieben - was ich gerade tue. Sie sollten auch niemals irgendetwas von / home / USER / für eine Website ausführen, da es Zugriff auf viele andere 'Benutzer'-Daten hat, wenn der Webserver nicht korrekt gepatcht oder konfiguriert ist.
                    </div>
                    
                      <small class="text-muted font-weight-lighter">
                        &mdash;
                        <a href="https://askubuntu.com/users/10616/thomas-ward" rel="nofollow noopener noreferrer" target="_blank">Thomas Ward </a>
                        
                      </small>
                    
                  </div>
                </div>
              
                <hr>
                <div class="is-comment media">
                  <div  class="text-center pr-2">
                    
                    <a data-trans-code="comment-1146777" class="translate-control btn btn-outline btn-light btn-lg" title="Sprache umschalten">
                      <span class="icon-translate"></span>
                    </a>
                  </div>
                  <div class="media-body">
                    <div data-trans-dest="comment-1146777">
                      @mastov Verstanden. Sie lösen viele Fragen, die ich mit Ihrer Erklärung hatte.
                    </div>
                    
                      <small class="text-muted font-weight-lighter">
                        &mdash;
                        <a href="https://askubuntu.com/users/526312/andr%c3%a9-carvalho" rel="nofollow noopener noreferrer" target="_blank">André Carvalho </a>
                        
                      </small>
                    
                  </div>
                </div>
              
            </div>
          </article>
        
          <hr>
          <article class="media">
            <div class="text-center pr-3">
              <div class="mb-3">
                <div class="votes-count border rounded" title="stimmen">
                  2 <br>
                  <span class="icon-thumbs-up"></span>
                </div>
              </div>
              <a data-trans-code="answer-939922" class="translate-control btn btn-outline btn-light btn-lg" title="Sprache umschalten"><span class="icon-translate"></span></a>
            </div>
            <div class="media-body">
              <div data-trans-dest="answer-939922" class="stack-block">
                <p>Ausgezeichnete Antwort von Thomas Ward 
 <a rel="nofollow noreferrer" target="_blank" href="https://askubuntu.com/a/767534/717860">https://askubuntu.com/a/767534/717860</a></p>

<p>Sie können alle empfohlenen Schritte in nur 3 Befehlen anstelle von 8 Befehlen ausführen:</p>

<p><strong>3 Befehle:</strong></p>

<pre><code>sudo chown -R ubuntu:www-data /var/www
sudo find /var/www -type d -exec chmod 2750 {} \+
sudo find /var/www -type f -exec chmod 640 {} \+
</code></pre>

<p><strong>Führen Sie die gleichen Schritte aus wie die folgenden 8 Befehle:</strong></p>

<pre><code>sudo chgrp -R www-data /var/www
sudo find /var/www -type d -exec chmod g+rx {} +
sudo find /var/www -type f -exec chmod g+r {} +
sudo chown -R ubuntu /var/www/
sudo find /var/www -type d -exec chmod u+rwx {} +
sudo find /var/www -type f -exec chmod u+rw {} +
sudo find /var/www -type d -exec chmod g+s {} +
sudo chmod -R o-rwx /var/www/
</code></pre>
              </div>
              <div class="row">
                <div class="col-md-6">
                  
                </div>
                <div class="col-md-6 text-right">
                  
                    <small class="text-muted font-weight-lighter">
                      &mdash;
                      <a href="https://askubuntu.com/users/717860/vipin-mehta" rel="nofollow noopener noreferrer" target="_blank">vipin mehta</a>
                      <br>
                      <a href="https://askubuntu.com/questions/767504/permissions-problems-with-var-www-html-and-my-own-home-directory-for-a-website/939922#939922" rel="nofollow noopener noreferrer" target="_blank">
                        <span class="icon-new-window"></span> quelle
                      </a>
                    </small>
                  
                </div>
              </div>
              
            </div>
          </article>
        
      

    </div>
    <div class="col-md-3">
      <div id="similar-questions" data-id="5ddfa55c42a61b3e24273111">

      </div>
      <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-0985488874840506"
     data-ad-slot="2153477748"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
    </div>
  </div>

</section>


<div class="modal fade" id="cookies-consent" data-backdrop="static" tabindex="-1" role="dialog" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">We use cookies</h5>
      </div>
      <div class="modal-body">
        <p class="small">
          
          
            We use cookies and other tracking technologies to improve your browsing experience on our website,
            to show you personalized content and targeted ads, to analyze our website traffic,
            and to understand where our visitors are coming from.
          
        </p>
        <p class="small">
          
          
            By continuing, you consent to our use of cookies and other tracking technologies and
            affirm you're at least 16 years old or have consent from a parent or guardian.
          
        </p>
        <p class="small">
          
          
            You can read details in our
            <a href='/legal/cookies-policy.html' target='_blank' rel="nofollow">Cookie policy</a> and
            <a href='/legal/privacy-policy.html' target='_blank' rel="nofollow">Privacy policy</a>.
          
        </p>
        <div class="text-center ">
          <button type="button" class="btn btn-success btn-lg" id="cookies-accept">OK, enter website!</button>
        </div>
      </div>
    </div>
  </div>
</div>


<section class="bg-light py-3 mt-5">
  <div class="container">
    <div class="row">
      <div class="col-md-6 text-muted font-weight-lighter">
        <small>
          
          
            Durch die Nutzung unserer Website bestätigen Sie, dass Sie unsere <a href='/legal/cookies-policy.html' target='_blank' rel='nofollow'>Cookie-Richtlinie</a> und <a href='/legal/privacy-policy.html' target='_blank' rel='nofollow'>Datenschutzrichtlinie</a> gelesen und verstanden haben.
          
        </small>
      </div>
      <div class="col-md-6 text-muted text-right font-weight-lighter">
        <small>
          Licensed under <a href="https://creativecommons.org/licenses/by-sa/3.0/" target="_blank">cc by-sa 3.0</a>
          with attribution required.
          
        </small>
      </div>
    </div>
  </div>
</section>

<script type="text/javascript" src="/static/CACHE/js/0718fd69c824.js"></script>

</body>
</html>